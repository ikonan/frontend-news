# æœ€ä½³å®è·µï¼šåˆ›å»ºä¸€ä¸ªå®‰å…¨çš„ç°ä»£ npm åŒ…

æŠ€æœ¯åœ¨ä¸æ–­è¿›æ­¥ï¼Œåˆ›å»º npm åŒ…çš„æ–¹æ³•ä¹Ÿå¾—è·Ÿä¸Šæ—¶ä»£ã€‚å³ä½¿ npm åˆ° 2025 å¹´å°±æœ‰ 15 å¹´å†å²äº†ï¼Œä½†åˆ›å»º npm åŒ…çš„æ–¹å¼åº”è¯¥æ›´ç°ä»£åŒ–ã€‚è¦æ˜¯ä½ è§‰å¾—è‡ªå·±çš„æ–¹æ³•æœ‰ç‚¹è¿‡æ—¶ï¼Œå°±æ¥ç€å¾€ä¸‹çœ‹å§ã€‚

åœ¨è¿™ä¸ªæ•™ç¨‹é‡Œï¼Œæˆ‘ä»¬ä¼šä¸€æ­¥ä¸€æ­¥æ•™ä½ ç”¨ 2025 å¹´çš„ç°ä»£æœ€ä½³å®è·µæ¥åˆ›å»º npm åŒ…ã€‚é¦–å…ˆï¼Œä½ ä¼šå­¦ä¼šæ€ä¹ˆåˆ›å»º npm åŒ…ï¼Œç†Ÿæ‚‰æŠŠåŒ…æ„å»ºå¹¶å‘å¸ƒåˆ° npm æ³¨å†Œè¡¨çš„æµç¨‹ã€‚ç„¶åï¼Œä½ ä¼šçŸ¥é“å¦‚ä½•é€šè¿‡è®¾ç½®æµ‹è¯•æ¡†æ¶ã€æŒç»­é›†æˆå’Œéƒ¨ç½²æµæ°´çº¿ã€å®‰å…¨æ£€æŸ¥ä»¥åŠè‡ªåŠ¨åŒ–çš„è¯­ä¹‰ç‰ˆæœ¬ç®¡ç†ï¼Œæ¥æ‰“é€ æ›´å¯é ã€èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ npm åŒ…ã€‚å­¦å®Œè¿™ä¸ªæ•™ç¨‹ï¼Œä½ å°±èƒ½è‡ªä¿¡åœ°åˆ›å»ºç°ä»£åŒ–ä¸”å®¹æ˜“ç»´æŠ¤çš„ npm åŒ…å•¦ã€‚å’±ä»¬å¼€å§‹å§ï¼

## å…ˆå†³æ¡ä»¶

1. äº†è§£ Node.jsã€JavaScript/TypeScriptã€GitHub å’Œ GitHub Actionsã€‚
2. æœ‰åˆ›å»º npm åŒ…çš„å¼€å‘å·¥å…·ã€‚

## ç®€å•ç¤ºä¾‹ npm åŒ…

å…ˆé€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç†Ÿæ‚‰åˆ›å»ºå’Œå‘å¸ƒ npm åŒ…çš„æµç¨‹ã€‚è¦æ˜¯ä½ å·²ç»ç†Ÿæ‚‰è¿™äº›å†…å®¹ï¼Œå°±å¯ä»¥ç›´æ¥è·³åˆ°[ç”Ÿäº§å°±ç»ªçš„ npm åŒ…](https://snyk.io/blog/best-practices-create-modern-npm-package/#npm-package)éƒ¨åˆ†ï¼Œè¿™é‡Œé¢æœ‰æ›´é«˜çº§çš„ä¸»é¢˜ã€‚

### è®¾ç½®ä½ çš„é¡¹ç›®

ä½ å¾—æœ‰ä¸ª GitHub é¡¹ç›®æ‰èƒ½å¼€å§‹ï¼ŒæŒ‰ä¸‹é¢çš„æ­¥éª¤æ¥åˆå§‹åŒ–é¡¹ç›®ã€‚è¦æ˜¯ä½ å·²ç»æœ‰å¯ç”¨çš„é¡¹ç›®ï¼Œå¯ä»¥è·³è¿‡ä¸‹ä¸€éƒ¨åˆ†ï¼Œä½†ä¸€å®šè¦ä»”ç»†çœ‹çœ‹è¿™éƒ¨åˆ†çš„ç¬¬ 5 æ­¥ï¼Œå…³äºä½ çš„åŒ…åç§°çš„å†…å®¹ã€‚

- åœ¨ [https://github.com/new](https://github.com/new) åˆ›å»ºä¸€ä¸ª GitHub ä»“åº“ã€‚
- æŠŠä»“åº“å…‹éš†åˆ°æœ¬åœ°ã€‚
  **ç¤ºä¾‹**ï¼š`git clone` [https://github.com/snyk-snippets/simple-npm-package.git](https://github.com/snyk-snippets/simple-npm-package.git)
- æ‰“å¼€ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°å…‹éš†é¡¹ç›®çš„æ–‡ä»¶å¤¹ã€‚
  **ç¤ºä¾‹**ï¼š`cd simple-npm-package`
- è¿è¡Œ `npm init -y` æ¥åˆ›å»º `package.json` æ–‡ä»¶ã€‚**æ³¨æ„**ï¼šå¦‚æœä½ å…‹éš†äº†ç¤ºä¾‹ä»“åº“ï¼Œå°±ä¸ç”¨æ‰§è¡Œè¿™ä¸€æ­¥ã€‚
- ç”¨ä½œç”¨åŸŸåç§°æ›´æ–° `package.json` é‡Œçš„ `name` å±æ€§ã€‚
  **ç¤ºä¾‹**ï¼š`@clarkio/simple-npm-package`ã€‚è®°å¾—ç”¨ä½ è‡ªå·±çš„ç”¨æˆ·åæˆ–ç»„ç»‡åç§°æ›¿æ¢ `@clarkio`ã€‚
- ä¸ºåŒ…ç¼–å†™ä»£ç ï¼ˆæˆ–è€…ç›´æ¥ç”¨ index.js é‡Œçš„ hello world ç¤ºä¾‹ï¼‰ã€‚

é¡¹ç›®åˆ›å»ºå¥½åï¼Œå°±å¯ä»¥æ¥ç€åˆ›å»º npm è´¦æˆ·äº†ã€‚

### è®¾ç½® npm è´¦æˆ·

ä¸ºäº†è®©åˆ«äººèƒ½ç”¨ä½ çš„ npm åŒ…ï¼Œä½ å¾—æœ‰ä¸ª npm è´¦æˆ·ã€‚ä¸‹é¢çš„æ­¥éª¤ä¼šæ•™ä½ åˆ›å»ºè´¦æˆ·ï¼ˆè¦æ˜¯ä½ è¿˜æ²¡æœ‰çš„è¯ï¼‰ï¼Œå¼€å¯åŒé‡èº«ä»½éªŒè¯ï¼ˆ2FAï¼‰æ¥æé«˜è´¦æˆ·å®‰å…¨æ€§ï¼Œå†æŠŠè´¦æˆ·è¿æ¥åˆ°æœ¬åœ°æœºå™¨ã€‚

1. åœ¨ [https://www.npmjs.com/signup](https://www.npmjs.com/signup) æ³¨å†Œ npm è´¦æˆ·ã€‚
2. ä¸ºäº†æ›´å®‰å…¨ï¼Œåœ¨ npm è´¦æˆ·ä¸Šå¼€å¯ 2FAï¼š[https://docs.npmjs.com/configuring-two-factor-authentication](https://docs.npmjs.com/configuring-two-factor-authentication)ã€‚
3. åœ¨ç»ˆç«¯ç”¨ `npm login` å‘½ä»¤ç™»å½•ä½ çš„ npm è´¦æˆ·ï¼Œç„¶åæŒ‰å±å¹•ä¸Šçš„æç¤ºæ“ä½œã€‚ä¾‹å¦‚ï¼š

```javascript
> npm login
npm notice Log in on https://registry.npmjs.org/
Username: clarkio
Password:
Email: (this IS public) <email address>
npm notice Please use the one-time password (OTP) from your authenticator application
Enter one-time password from our authenticator app: <OTP>
Logged in as clarkio on https://registry.npmjs.org/.
```

### å¦‚ä½•å‘å¸ƒä½ çš„ npm åŒ…

ä½ æœ‰äº† npm é¡¹ç›®ï¼Œä¹Ÿæ³¨å†Œäº† npm è´¦æˆ·ï¼Œå°±å¯ä»¥æŠŠåŒ…å‘å¸ƒåˆ° [å®˜æ–¹ npm å…¬å…±æ³¨å†Œè¡¨](https://npmjs.org/) äº†ã€‚ä¸‹é¢æ˜¯å‘å¸ƒå‰æ£€æŸ¥å’Œæ­£å¼å‘å¸ƒçš„å®Œæ•´æµç¨‹ï¼š

1\. åœ¨ç»ˆç«¯è¿è¡Œ `npx pack --dry-run` é¢„è§ˆè¦å‘å¸ƒçš„åŒ…å†…å®¹ï¼š

```bash
> npx pack --dry-run
npm notice Tarball Contents
npm notice 1.1kB LICENSE
npm notice 1.9kB README.md
npm notice 108B index.js
npm notice 700B package.json
npm notice Tarball Details
```

è¿™æ ·èƒ½ä¿è¯ä½ æ²¡æœ‰æ¼æ‰åŒ…æ­£å¸¸è¿è¡Œéœ€è¦çš„æºä»£ç æ–‡ä»¶ã€‚å¦å¤–ï¼Œå…»æˆä¹ æƒ¯ï¼Œåˆ«ä¸å°å¿ƒæŠŠæ•æ„Ÿä¿¡æ¯ï¼ˆåƒåŒ…å«æ•°æ®åº“å‡­è¯æˆ– API å¯†é’¥çš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼‰æ³„éœ²ç»™å…¬ä¼—ã€‚

2\. åœ¨ç»ˆç«¯è¿è¡Œ `npm publish --dry-run` å‘½ä»¤ï¼Œçœ‹çœ‹å®é™…æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ä¼šæ€æ ·ã€‚

```bash
> npm publish --dry-run
npm notice
npm notice ğŸ“¦@clarkio/simple-npm-package@0.0.1
npm notice === Tarball Contents ===
npm notice 1.1kB LICENSE
npm notice 1.2kB README.md
npm notice 95B index.js
npm notice 690B package.json
npm notice === Tarball Details===
npm notice name: @clarkio/simple-npm-package
npm notice version: 0.0.1
npm notice filename:@clarkio/simple-npm-package-0.0.1.tgz
npm notice package size:1.7 kB
npm notice unpacked size: 3.1 kB
npm notice shasum:40ede3ed630fa8857c0c9b8d4c81664374aa811c
npm notice integrity:sha512-QZCyWZTspkcUXL... ]L60ZKBOOBRLTg==
npm notice total files:4
npm notice
+ @clarkio/simple-npm-package@0.0.1
```

3\. åœ¨ç»ˆç«¯è¿è¡Œ `npm publish --access=public` æŠŠåŒ…å®é™…å‘å¸ƒåˆ° npmã€‚**æ³¨æ„**ï¼šä½œç”¨åŸŸåŒ…ï¼ˆåƒ @clarkio/modern-npm-packageï¼‰é»˜è®¤æ˜¯ç§æœ‰çš„ï¼Œæ‰€ä»¥éœ€è¦ `--access=public` é€‰é¡¹ã€‚å¦‚æœåŒ…æ²¡æœ‰ä½œç”¨åŸŸï¼Œè€Œä¸” `package.json` é‡Œçš„ `private` å­—æ®µæ²¡è®¾ç½®æˆ `true`ï¼Œé‚£è¿™ä¸ªåŒ…å°±æ˜¯å…¬å¼€çš„ã€‚

```bash
> npm publish --access=public
npm notice
npm notice ğŸ“¦@clarkio/simple-npm-package@0.0.1
npm notice === Tarball Contents ===
npm notice 1.1kB LICENSE
npm notice 1.2kB README.md
npm notice 95B index.js
npm notice 690B package.json
npm notice === Tarball Details===
npm notice name: @clarkio/simple-npm-package
npm notice version: 0.0.1
npm notice filename:@clarkio/simple-npm-package-0.0.1.tgz
npm notice package size:2.1 kB
npm notice unpacked size: 4.1 kB
npm notice shasum:6f335d6254ebb77a5a24ee729650052a69994594
npm notice integrity:sha512-VZ1K1eMFOKeJW[...]7ZjKFVAxLcpdQ==
npm notice total files:4
npm notice
This operation requires a one-time password.
Enter OTP: <OTP>
+ @clarkio/simple-npm-package@0.0.1
```

ä½ å·²ç»å®Œæˆå•¦ï¼ä½ å·²ç»æ„å»ºå¹¶éƒ¨ç½²äº†è‡ªå·±çš„ npm åŒ…ã€‚æ¥ä¸‹æ¥ï¼Œä½ ä¼šå­¦ä¹ æ€ä¹ˆåˆ›å»ºä¸€ä¸ªæ›´å¯é ã€èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒã€èƒ½è¢«æ›´å¤šäººä½¿ç”¨çš„åŒ…ã€‚

## ç”Ÿäº§å°±ç»ªçš„ npm åŒ…

å‰é¢çš„ç¤ºä¾‹åŒ…æœ‰å¯èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒç”¨ï¼Œä½†éšç€æ—¶é—´æ¨ç§»ï¼Œéœ€è¦æ‰‹åŠ¨ç»´æŠ¤ã€‚ç”¨å·¥å…·å’Œè‡ªåŠ¨åŒ–ï¼Œå†åŠ ä¸Šåˆé€‚çš„æµ‹è¯•å’Œå®‰å…¨æ£€æŸ¥ï¼Œèƒ½å‡å°‘è®©åŒ…å¹³ç¨³è¿è¡Œçš„æ€»ä½“å·¥ä½œé‡ã€‚å’±ä»¬æ¥çœ‹çœ‹è¿™éƒ½æ¶‰åŠä»€ä¹ˆã€‚

ä¸‹é¢çš„éƒ¨åˆ†ä¼šæ¶µç›–ï¼š

1. è®¾ç½®ä½ çš„ `modern-npm-package` é¡¹ç›®ã€‚
2. ä¸º ECMAScript (ESM) æ¨¡å—æ ¼å¼è¿›è¡Œæ„å»ºã€‚
3. è®¾ç½®å¹¶ç¼–å†™å•å…ƒæµ‹è¯•ã€‚
4. å®æ–½å®‰å…¨æ£€æŸ¥ã€‚
5. è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒã€‚

è¦æ˜¯ä½ çœ‹è¿™ç¯‡æ–‡ç« çš„æ—¶å€™æ²¡æœ‰è‡ªå·±çš„é¡¹ç›®å¯ä»¥ç”¨ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªç¤ºä¾‹é¡¹ç›®ï¼š[https://github.com/snyk-snippets/modern-npm-package](https://github.com/snyk-snippets/modern-npm-package)ã€‚

### ä¸º ECMAScript æ¨¡å—æ ¼å¼è¿›è¡Œæ„å»º

ä» Node.js 12 ç‰ˆæœ¬åŠæ›´é«˜ç‰ˆæœ¬å¼€å§‹ï¼ŒECMAScript æ¨¡å—æ ¼å¼å°±å¾—åˆ°åŸç”Ÿæ”¯æŒäº†ï¼Œæœ€æ–°çš„é•¿æœŸæ”¯æŒç‰ˆæœ¬æ˜¯ 22.xã€‚è€Œä¸”ï¼ŒJavaScript è¿è¡Œæ—¶é¢†åŸŸæœ‰äº†æ›´å¤šç«äº‰å¯¹æ‰‹ï¼Œåƒ Bun.js å’Œ Denoï¼Œè¿™è®©ç°åœ¨ä¸“æ³¨äºç”¨ ESM æ ¼å¼å˜å¾—æ›´å®¹æ˜“ã€‚æˆ‘ä»¬ä¼šç”¨ TypeScript è®©ä½ çš„ npm åŒ…æ”¯æŒ ESM æ ¼å¼ã€‚

- é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå« `tsconfig.json` çš„ TypeScript é…ç½®æ–‡ä»¶ã€‚è¿™æ˜¯åœ¨ä½¿ç”¨ ESM æ„å»ºä½ çš„åŒ…æ—¶å¯ä»¥ç”¨çš„ç¼–è¯‘è®¾ç½®ã€‚ä½ å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´è¿™ä¸ªæ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ ä¸ç”¨æä¾›çš„ç¤ºä¾‹é¡¹ç›®ç»“æ„ï¼Œå°±å¾—è°ƒæ•´ `files` å±æ€§ï¼Œè®©å®ƒå’Œä½ çš„é¡¹ç›®ç»“æ„ä¸€è‡´ã€‚

```json
{
  "compilerOptions": {
    "lib": ["ES2024", "DOM"],
    "target": "ES2024",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "outDir": "./lib/",
    "declarationDir": "./lib/types",
    "strict": true,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "skipLibCheck": true,
    "checkJs": true,
    "allowJs": true,
    "declaration": true,
    "declarationMap": true,
    "allowSyntheticDefaultImports": true
  },
  "files": ["./src/index.ts"]
}
```

- `lib` å±æ€§å‘Šè¯‰ TypeScript åœ¨ä¸ºé¡¹ç›®å†™ä»£ç æ—¶è¯¥å¼•ç”¨å“ªäº›ç±»å‹æ¥æä¾›å¸®åŠ©ã€‚
- `target` å±æ€§å‘Šè¯‰ TypeScript è¯¥æŠŠé¡¹ç›®ä»£ç ç¼–è¯‘æˆå“ªä¸ª JavaScript ç‰ˆæœ¬ã€‚
- `module` å±æ€§å‘Šè¯‰ TypeScript åœ¨ç¼–è¯‘é¡¹ç›®ä»£ç æ—¶è¯¥ç”¨å“ªç§ JavaScript æ¨¡å—æ ¼å¼ã€‚
- `moduleResolution` å±æ€§å¸®åŠ© TypeScript ç¡®å®šæ€ä¹ˆå¼•ç”¨ â€œimportâ€ è¯­å¥ã€‚
- `outDir` å’Œ `declarationDir` å±æ€§å‘Šè¯‰ TypeScript è¯¥æŠŠç¼–è¯‘ä»£ç çš„ç»“æœå’Œå®šä¹‰å…¶ä¸­ä½¿ç”¨çš„ç±»å‹çš„æ–‡ä»¶æ”¾åœ¨å“ªå„¿ã€‚

2\. æ›´æ–° `package.json` æ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ª `files` å­—æ®µï¼ŒæŒ‡å‘ `lib` æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œé¢åŒ…å« TypeScript ä¸ºä½ æ„å»ºåŒ…çš„ç»“æœã€‚
3\. æ›´æ–° `package.json` æ–‡ä»¶é‡Œçš„ `main` å’Œ `types` å­—æ®µï¼Œè®©å®ƒä»¬æŒ‡å‘æ„å»º/ç¼–è¯‘åçš„åŒ…çš„è¾“å‡ºã€‚è¿™æ˜¯é»˜è®¤çš„å¤‡ç”¨é€‰é¡¹ã€‚

```javascript
"types": "./lib/index.d.ts",
"main": "./lib/index.js",
```

4\. åœ¨ `package.json` æ–‡ä»¶é‡Œæ·»åŠ ä¸€ä¸ª `files` å­—æ®µï¼ŒæŒ‡æ˜åœ¨ npm æ‰“åŒ…ä½ çš„ä»£ç è¿›è¡Œå‘å¸ƒæ—¶è¯¥åŒ…å«å“ªäº›æ–‡ä»¶ã€‚

```javascript
"files": [
  "lib/**/*"
],
```

5\. é€šè¿‡ `package.json` é‡Œçš„ `scripts` å­—æ®µåˆ›å»ºå‘½ä»¤ï¼Œç”¨ `tsc` ç¼–è¯‘åŒ…ã€‚è¿™ä¼šç”Ÿæˆ `lib` æ–‡ä»¶å¤¹çš„æºæ–‡ä»¶ã€‚

```javascript
"clean": "del-cli ./lib",
"build": "npm run clean && tsc -p ./tsconfig.json",
"prepack": "npm run build",
```

- `clean` è„šæœ¬ç”¨æ¥åˆ é™¤ä¹‹å‰æ„å»ºç”Ÿæˆçš„è¾“å‡ºæ–‡ä»¶ï¼Œè¿™æ ·å°±èƒ½ä»å¤´å¼€å§‹æ„å»ºã€‚
- `build` è„šæœ¬ä¼šæ¸…ç†ä¹‹å‰çš„è¾“å‡ºæ–‡ä»¶ï¼Œç”¨ TypeScript ç¼–è¯‘å™¨æŠŠåŒ…æ„å»ºåˆ°è¾“å‡ºç›®å½•ã€‚
- `prepack` è„šæœ¬ç”± npm åœ¨æ‰“åŒ… npm åŒ…å‡†å¤‡å‘å¸ƒåˆ°æ³¨å†Œè¡¨ä¹‹å‰ä½¿ç”¨ã€‚

6\. ç°åœ¨ä½ å¾—å®‰è£…è®©è¿™äº›åŠŸèƒ½æ­£å¸¸å·¥ä½œæ‰€éœ€çš„å¼€å‘ä¾èµ–é¡¹ã€‚è¿è¡Œ `npm install -D typescript del-cli`ã€‚
7\. ç°åœ¨ä½ å¯ä»¥åœ¨ç»ˆç«¯è¿è¡Œ `npm run build`ï¼Œè®© TypeScript æ„å»ºä½ çš„é¡¹ç›®ï¼Œä¸ºä½¿ç”¨å’Œå‘å¸ƒåšå‡†å¤‡ã€‚

è¿™å°±æ˜¯ç”¨ TypeScript æ„å»ºæ”¯æŒ CommonJS å’Œ ECMAScript æ¨¡å—æ ¼å¼çš„ npm åŒ…éœ€è¦çš„æ‰€æœ‰è®¾ç½®ã€‚æ¥ä¸‹æ¥ï¼Œä½ ä¼šå­¦ä¹ æ€ä¹ˆé’ˆå¯¹ npm åŒ…ä»£ç è®¾ç½®å¹¶è¿è¡Œæµ‹è¯•ï¼Œç¡®ä¿å®ƒèƒ½äº§ç”Ÿä½ æƒ³è¦çš„ç»“æœã€‚

### è®¾ç½®å¹¶æ·»åŠ æµ‹è¯•

ä¸ºäº†å¯¹ä»£ç çš„è¡Œä¸ºå’Œç»“æœæœ‰ä¿¡å¿ƒï¼Œä½ å¾—å®æ–½ä¸€ä¸ªæµ‹è¯•æµç¨‹ã€‚æµ‹è¯•ä¼šè®©ä½ åœ¨åˆæ¬¡å†™ä»£ç æ—¶ï¼Œç”¨å’Œæ­£å¸¸é¡ºåˆ©è·¯å¾„ä¸ä¸€æ ·çš„æ–¹å¼æ€è€ƒä»£ç çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥æƒ³æƒ³æ€ä¹ˆè®©ä¸€ä¸ªå‡½æ•°å‡ºé”™ï¼ŒæŠ›å‡ºé”™è¯¯æˆ–è€…äº§ç”Ÿæ„å¤–çš„ç»“æœã€‚è¿™æ ·èƒ½è®©ä½ çš„åº”ç”¨ç¨‹åºæ›´æœ‰å¼¹æ€§ã€æ›´å¯æŒç»­ï¼Œè¿˜èƒ½ç¡®ä¿æ·»åŠ æ›´å¤šåŠŸèƒ½æ—¶ä¸ä¼šå‡ºé—®é¢˜ã€‚

è¦æ˜¯ä½ æƒ³æ·±å…¥äº†è§£æµ‹è¯•ï¼Œå­¦ä¹ æœ€ä½³å®è·µï¼Œä¸€å®šè¦çœ‹çœ‹ Yoni Goldberg çš„ [JavaScript æœ€ä½³å®è·µä»“åº“](https://github.com/goldbergyoni/javascript-testing-best-practices)ã€‚

### å•å…ƒæµ‹è¯•

è¦ç¡®ä¿ä½ çš„åŒ…æŒ‰ä½ æœŸæœ›çš„æ–¹å¼è¿è¡Œï¼Œå°±å¾—é’ˆå¯¹ä»£ç ç¼–å†™æµ‹è¯•ã€‚ä½ éœ€è¦ä¸€äº›å·¥å…·æ¥å¸®ä½ è®¾ç½®é¡¹ç›®ï¼Œè¿è¡Œå•å…ƒæµ‹è¯•å¹¶æ˜¾ç¤ºç»“æœã€‚è¿™äº›å·¥å…·ç°åœ¨ä½œä¸º Node.js çš„å†…ç½®æ¨¡å—æä¾›ï¼ˆ[è‡ª 20.xã€18.x ç‰ˆæœ¬ä»¥åŠ 16.17.x ç‰ˆæœ¬åœ¨å®éªŒæ ‡å¿—åå¯ç”¨](https://nodejs.org/docs/latest-v22.x/api/test.html#test-runner)ï¼‰ã€‚æŒ‰ä¸‹é¢çš„æ­¥éª¤ä¸ºä½ çš„ npm åŒ…è®¾ç½®å¹¶è¿è¡Œæµ‹è¯•ï¼š

1. åœ¨ç»ˆç«¯ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…å¼€å‘ä¾èµ–é¡¹ï¼š`npm i -D @types/node`
2. åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `tests` æ–‡ä»¶å¤¹ã€‚
3. åœ¨ `tests` æ–‡ä»¶å¤¹é‡Œåˆ›å»ºä¸€ä¸ª `index.test.ts` æ–‡ä»¶ã€‚
4. åœ¨ `index.test.ts` æ–‡ä»¶é‡Œç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæµ‹è¯• `index.ts` é‡Œçš„ä»£ç ã€‚
   **æ³¨æ„**ï¼šä½ å¯ä»¥å‚è€ƒç¤ºä¾‹ npm åŒ…ä»“åº“ä½œä¸ºç¤ºä¾‹ï¼š[https://github.com/snyk-snippets/modern-npm-package](https://github.com/snyk-snippets/modern-npm-package)ã€‚
5. åœ¨ `package.json` æ–‡ä»¶çš„ `scripts` éƒ¨åˆ†æ·»åŠ ä¸€ä¸ª `test` å±æ€§ï¼ŒæŠŠå®ƒçš„å€¼è®¾ç½®ä¸º `node --experimental-strip-types --test`

```json
{
  "scripts": {
    "clean": "del-cli ./lib",
    "build": "npm run clean && tsc -p ./tsconfig.json",
    "prepack": "npm run build",
    "test": "node --experimental-strip-types --test"
  }
}
```

6\. åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„ç»ˆç«¯ä¸­è¿è¡Œ `npm test` æ¥æ‰§è¡Œæµ‹è¯•ï¼ŒæŸ¥çœ‹ç»“æœï¼š

```bash
> @snyk-labs/modern-npm-package@0.0.0-development test
> node --experimental-strip-types --test

(node:83429) ExperimentalWarning: Type Stripping is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
(node:83430) ExperimentalWarning: Type Stripping is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
â–¶ NPM Package
 âœ” should be an object (0.754083ms)
 âœ” should have a helloWorld property (0.518958ms)
 âœ” NPM Package (1.754875ms)
â–¶ Hello World Function
 âœ” should be a function (0.136667ms)
 âœ” should return the hello world message (0.063791ms)
âœ” Hello World Function (0.270417ms)
â–¶ Goodbye Function
 âœ” should be a function (0.13275ms)
 âœ” should return the goodbye message (0.159541ms)
 âœ” Goodbye Function (0.552542ms)
â„¹ tests 6
â„¹ suites 3
â„¹ pass 6
â„¹ fail 0
â„¹ cancelled 0
â„¹ skipped 0
â„¹ todo 0
â„¹ duration_ms 113.692542
```

### åœ¨æµæ°´çº¿ä¸­è¿›è¡Œæµ‹è¯•

ä½ å·²ç»æœ‰äº†éªŒè¯ä»£ç è¡Œä¸ºçš„æµ‹è¯•ï¼Œå°±å¯ä»¥åœ¨æµæ°´çº¿é‡Œç”¨å®ƒä»¬äº†ã€‚è¿™èƒ½ç¡®ä¿æ¨é€åˆ°ä»“åº“é‡Œçš„ä»»ä½•æ›´æ”¹éƒ½ä¸ä¼šç ´åä»£ç çš„è¡Œä¸ºã€‚æŒ‰ä¸‹é¢çš„æ­¥éª¤åœ¨é¡¹ç›®æµæ°´çº¿é‡Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•å·¥ä½œæµã€‚

1. ä¸ºä½ çš„ä»“åº“åˆ›å»ºä¸€ä¸ªæ–°çš„ GitHub Actionï¼š`https://github.com/<ä½ çš„è´¦æˆ·æˆ–ç»„ç»‡>/<ä½ çš„ä»“åº“åç§°>/actions/new`
2. æŠŠå·¥ä½œæµé‡å‘½åä¸º `tests.yml`
3. åœ¨ä½ çš„å·¥ä½œæµæ–‡ä»¶é‡Œæ’å…¥ä¸‹é¢çš„ Snyk GitHub Action è„šæœ¬ï¼š

```yml
name: Tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [22.x]

    steps:
      - uses: actions/checkout@v4
      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
      - run: npm ci
      - run: npm test
```

è¿™ä¸ª YAML è„šæœ¬ä¼šæ£€å‡ºä½ æœ€æ–°çš„ä»£ç ï¼Œå®‰è£…ä¾èµ–é¡¹ï¼Œè¿è¡Œ `npm test` å‘½ä»¤æ¥æ‰§è¡Œæµ‹è¯•ã€‚å®ƒä¼šé’ˆå¯¹ `node-version` å­—æ®µé‡Œåˆ—å‡ºçš„æ¯ä¸ª Node.js ç‰ˆæœ¬æ‰§è¡Œè¿™äº›æ“ä½œï¼Œè¿™æ ·ä½ å°±èƒ½ç¡®ä¿ä»£ç åœ¨æ¯ä¸ªè¿è¡Œæ—¶é‡Œéƒ½èƒ½æŒ‰é¢„æœŸå·¥ä½œã€‚

ä½ ç°åœ¨å·²ç»å®Œæˆäº†å¯¹ npm åŒ…ä»£ç è¿›è¡Œæµ‹è¯•è¿è¡Œå’Œè¯„ä¼°çš„é¡¹ç›®è®¾ç½®ã€‚ä¸è¿‡ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œæˆ‘æ€ä¹ˆåœ¨å¦ä¸€ä¸ªé¡¹ç›®é‡Œ _ä½¿ç”¨_ æˆ‘çš„ npm åŒ…è¿›è¡Œæµ‹è¯•å‘¢ï¼Ÿâ€ æ¥ä¸‹æ¥å’±ä»¬çœ‹çœ‹æ€ä¹ˆå®ç°ã€‚

### åŒ…æµ‹è¯•

é€šè¿‡å•å…ƒæµ‹è¯•å¯¹ npm åŒ…çš„ä»£ç æœ‰ä¿¡å¿ƒæ˜¯ä¸€å›äº‹ï¼Œä½†ç¡®ä¿æ•´ä¸ª npm åŒ…çš„ä½¿ç”¨ä½“éªŒåˆæ˜¯å¦ä¸€å›äº‹ã€‚è¿™è¦æŠŠä½ çš„ npm åŒ…ä½œä¸ºä¾èµ–é¡¹å¼•å…¥åˆ°å¦ä¸€ä¸ªé¡¹ç›®é‡Œï¼Œçœ‹çœ‹å®ƒåœ¨è¿™ä¸ªé¡¹ç›®é‡Œçš„ä½¿ç”¨æ˜¯å¦å¦‚ä½ é¢„æœŸçš„é‚£æ ·é¡ºåˆ©ã€‚ä¸‹é¢æ˜¯äº”ç§å¯ä»¥è¿›è¡Œæµ‹è¯•çš„æ–¹æ³•ï¼š

1. é€šè¿‡ `npm pack` è¾“å‡ºè¿›è¡Œå®‰è£…ã€‚
2. é€šè¿‡ç›¸å¯¹è·¯å¾„è¿›è¡Œå®‰è£…ã€‚
3. é€šè¿‡ `npm link` è¿›è¡Œå®‰è£…ã€‚
4. é€šè¿‡æ³¨å†Œè¡¨ï¼ˆä¾‹å¦‚ [npmjs.com](https://npmjs.com/) ä¸Šçš„ npm å…¬å…±æ³¨å†Œè¡¨ï¼‰è¿›è¡Œå®‰è£…ã€‚
5. ä½¿ç”¨ [Verdaccio](https://verdaccio.org/)ï¼ˆä¸€ä¸ªå¼€æºçš„ npm ç§æœ‰æ³¨å†Œè¡¨é¡¹ç›®ï¼‰åœ¨æŒç»­é›†æˆï¼ˆCIï¼‰ä¸­è¿è¡Œç«¯åˆ°ç«¯çš„åŒ…å‘å¸ƒå’Œå®‰è£…æ­¥éª¤ã€‚

#### npm pack

è¿™ç§æ–¹æ³•ç”¨ `npm pack` å‘½ä»¤æŠŠä½ çš„ npm åŒ…æ‰“åŒ…å¹¶å‹ç¼©æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼ˆ`<åŒ…å>.tgz`ï¼‰ã€‚ç„¶åä½ å¯ä»¥è¿›å…¥æƒ³ç”¨è¿™ä¸ªåŒ…çš„é¡¹ç›®ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶æ¥å®‰è£…å®ƒã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

1. åœ¨ä½ çš„ npm åŒ…ç›®å½•ä¸‹ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œ `npm pack` å‘½ä»¤ã€‚æ³¨æ„å®ƒç”Ÿæˆçš„ `.tgz` æ–‡ä»¶åŠå…¶ä½ç½®ã€‚
2. åˆ‡æ¢åˆ°ä½ æƒ³ç”¨ npm åŒ…çš„é¡¹ç›®ç›®å½•ã€‚**ç¤ºä¾‹**ï¼š`cd /path/to/project`
3. åœ¨ **å®¢æˆ·ç«¯** é¡¹ç›®ç›®å½•ä¸­ï¼Œè¿è¡Œ `npm install /path/to/package.tgz`ï¼Œä½†è¦æŠŠ `/path/to/package.tgz` æ›¿æ¢æˆæ­¥éª¤ 1 é‡Œ `.tgz` æ–‡ä»¶çš„æ­£ç¡®è·¯å¾„ã€‚
4. ç„¶åä½ å°±å¯ä»¥åœ¨è¿™ä¸ª **å®¢æˆ·ç«¯** é¡¹ç›®é‡Œå¼€å§‹ç”¨è¿™ä¸ªåŒ…è¿›è¡Œæµ‹è¯•äº†ã€‚

è¿™èƒ½è®©ä½ ä½“éªŒåˆ°æœ€æ¥è¿‘ç”Ÿäº§ç¯å¢ƒçš„ npm åŒ…ä½¿ç”¨æƒ…å†µã€‚

#### npm link

è¿™ç§æ–¹æ³•ç”¨ `npm link` å‘½ä»¤ï¼Œåœ¨å°è¯•æŠŠä½ çš„åŒ…å®‰è£…åˆ° **å®¢æˆ·ç«¯** é¡¹ç›®é‡Œæ—¶ï¼ŒæŒ‡å‘ä½ çš„åŒ…ç›®å½•ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

1. åœ¨ä½ çš„ npm åŒ…ç›®å½•ä¸‹çš„ç»ˆç«¯ä¸­è¿è¡Œ `npm link`ã€‚
2. åˆ‡æ¢åˆ°ä½ æƒ³ç”¨è¿™ä¸ª npm åŒ…çš„é¡¹ç›®ç›®å½•ã€‚**ç¤ºä¾‹**ï¼š`cd /path/to/project`
3. åœ¨ **å®¢æˆ·ç«¯** é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ `npm link <ä½ çš„åŒ…å>`ã€‚

è¿™ä¼šåœ¨ä½ çš„ä»£ç å¼•ç”¨è¿™ä¸ªåŒ…æ—¶ï¼ŒæŠŠ **å®¢æˆ·ç«¯** é¡¹ç›®æŒ‡å‘ npm åŒ…ç›®å½•ã€‚è¿™ç§æ–¹æ³•ä¸ä¼šè®©ä½ ä½“éªŒåˆ°å®Œå…¨åƒç”Ÿäº§ç¯å¢ƒé‚£æ ·ä½¿ç”¨åŒ…ï¼Œä½†èƒ½ç¡®ä¿åŒ…çš„åŠŸèƒ½æŒ‰é¢„æœŸå·¥ä½œã€‚

#### ç›¸å¯¹è·¯å¾„

è¿™ç§æ–¹æ³•åˆ©ç”¨äº†ä½ ç°æœ‰çš„ `npm install` å‘½ä»¤ä½¿ç”¨çŸ¥è¯†ã€‚å®ƒå’Œ `npm link` ç±»ä¼¼ï¼Œä½†ä¸ç”¨å­¦åƒ `link` è¿™æ ·çš„æ–°å‘½ä»¤ã€‚

1. åœ¨ä½ çš„ **å®¢æˆ·ç«¯** é¡¹ç›®ç›®å½•ä¸‹çš„ç»ˆç«¯ä¸­è¿è¡Œ `npm install /path/to/your/package`ã€‚

å’Œ `npm link` æ–¹æ³•ç±»ä¼¼ï¼Œè¿™èƒ½è®©ä½ åœ¨å®¢æˆ·ç«¯é¡¹ç›®é‡Œå¿«é€Ÿæµ‹è¯•åŒ…çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æä¾›å®Œå…¨åƒç”Ÿäº§ç¯å¢ƒé‚£æ ·çš„ä½“éªŒã€‚è¿™æ˜¯å› ä¸ºå®ƒæŒ‡å‘çš„æ˜¯å®Œæ•´çš„åŒ…æºä»£ç ç›®å½•ï¼Œè€Œ **ä¸æ˜¯** ä½ åœ¨ npm æ³¨å†Œè¡¨é‡Œèƒ½æ‰¾åˆ°çš„æ‰“åŒ…ç‰ˆæœ¬ã€‚

#### npm æ³¨å†Œè¡¨

è¿™ç§æ–¹æ³•åˆ©ç”¨äº† npm åŒ…çš„å…¬å…±ï¼ˆæˆ–ä½ è‡ªå·±çš„ï¼‰æ³¨å†Œè¡¨ã€‚å®ƒè¦å‘å¸ƒä½ çš„åŒ…ï¼Œç„¶ååƒå®‰è£…å…¶ä»–ä»»ä½• npm åŒ…ä¸€æ ·è¿›è¡Œå®‰è£…ã€‚

1. ç”¨æœ¬æ–‡å‰é¢è¯´çš„æ­¥éª¤ï¼Œé€šè¿‡ `npm publish` å‘½ä»¤å‘å¸ƒä½ çš„ npm åŒ…ã€‚
2. åˆ‡æ¢åˆ°ä½ æƒ³ç”¨è¿™ä¸ª npm åŒ…çš„é¡¹ç›®ç›®å½•ã€‚**ç¤ºä¾‹**ï¼š`cd /path/to/project`
3. åœ¨ **å®¢æˆ·ç«¯** é¡¹ç›®ç›®å½•ä¸­è¿è¡Œ `npm install <name-of-your-package>`ã€‚

æ­¤æ—¶ï¼Œä½ å·²ç»æ„å»ºäº†æ”¯æŒç°ä»£æ¨¡å—æ ¼å¼çš„åŒ…ï¼Œå¹¶é€šè¿‡å•å…ƒæµ‹è¯•å’Œæ‰“åŒ…æµ‹è¯•ç¡®ä¿å®ƒèƒ½æŒ‰é¢„æœŸè¿è¡Œã€‚æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦ç¡®ä¿ npm åŒ…ä¸­ä¸å­˜åœ¨å®‰å…¨é—®é¢˜ï¼Œå¹¶é˜²æ­¢å¼•å…¥æ–°çš„å®‰å…¨é—®é¢˜ã€‚

## å®æ–½å®‰å…¨æ£€æŸ¥

å°±åƒä½ ä¸å¸Œæœ›è‡ªå·±çš„é¡¹ç›®æœ‰å®‰å…¨æ¼æ´ä¸€æ ·ï¼Œä½ ä¹Ÿä¸å¸Œæœ›æŠŠæ¼æ´å¸¦åˆ°åˆ«äººçš„é¡¹ç›®é‡Œã€‚æ„å»ºä¸€ä¸ªä¼šåœ¨å¾ˆå¤šå…¶ä»–é¡¹ç›®é‡Œä½¿ç”¨çš„ npm åŒ…ï¼Œæ„å‘³ç€ä½ è¦æ‰¿æ‹…æ›´å¤§çš„è´£ä»»ï¼Œç¡®ä¿ä¸€åˆ‡éƒ½æ˜¯å®‰å…¨çš„ã€‚ä½ éœ€è¦è®¾ç½®å®‰å…¨æ£€æŸ¥ï¼Œå¸®åŠ©ç›‘æ§æ¼æ´ã€å‘å‡ºè­¦æŠ¥ï¼Œè¿˜èƒ½ååŠ©ç¼“è§£æ¼æ´ã€‚åƒ [Snyk](https://snyk.io/product/) è¿™æ ·çš„å·¥å…·å°±èƒ½ç®€åŒ–å®ç°è¿™äº›éœ€æ±‚æ‰€éœ€çš„å·¥ä½œã€‚

å¯¹äºè¿™ä¸ªç¤ºä¾‹ npm åŒ…ï¼Œä½ ç”¨ GitHub ä½œä¸ºæºä»£ç ç®¡ç†å·¥å…·ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨å®ƒçš„ GitHub Actions åŠŸèƒ½ï¼ŒæŠŠ Snyk é›†æˆåˆ°ä½ çš„å·¥ä½œæµç¨‹ä¸­ã€‚Snyk æœ‰ä¸€ä¸ª [GitHub Actions](https://github.com/snyk/actions) å‚è€ƒé¡¹ç›®ï¼Œèƒ½å¸®ä½ å¿«é€Ÿå¼€å§‹è¿™é¡¹å·¥ä½œï¼Œè¿˜èƒ½ä¸ºä½ åœ¨é¡¹ç›®é‡Œå¯èƒ½ç”¨åˆ°çš„å…¶ä»–ç¼–ç¨‹è¯­è¨€å’Œå·¥å…·æä¾›ç¤ºä¾‹ã€‚

1\. Snyk æ˜¯å…è´¹çš„ï¼Œæ‰€ä»¥å»æ³¨å†Œå¹¶è·å–ä½ çš„ [Snyk API ä»¤ç‰Œ](https://app.snyk.io/account)ã€‚
2\. åœ¨ GitHub ä¸ŠæŠŠä½ çš„ Snyk API ä»¤ç‰Œæ·»åŠ ä¸ºä»“åº“å¯†é’¥ï¼š`https://github.com/<ä½ çš„è´¦æˆ·æˆ–ç»„ç»‡>/<ä½ çš„ä»“åº“åç§°>/settings/secrets/actions/new`
3\. ä¸ºä½ çš„ä»“åº“åˆ›å»ºä¸€ä¸ªæ–°çš„ GitHub Actionï¼š`https://github.com/<ä½ çš„è´¦æˆ·æˆ–ç»„ç»‡>/<ä½ çš„ä»“åº“åç§°>/actions/new`
4\. æŠŠå·¥ä½œæµé‡å‘½åä¸º `snyk.yml`ã€‚
5\. åœ¨ä½ çš„å·¥ä½œæµæ–‡ä»¶é‡Œæ’å…¥ä¸‹é¢çš„ Snyk Action è„šæœ¬ï¼š

```yml
name: Snyk Security Check
on: [push, pull_request]
jobs:
  security:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@main
    - name: Run Snyk to check for vulnerabilities
  uses: snyk/actions/node@master
  env:
  SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
```

6\. æäº¤ä½ çš„æ›´æ”¹ã€‚
7\. éªŒè¯æ“ä½œæ˜¯å¦æˆåŠŸè¿è¡Œï¼š`https://github.com/<ä½ çš„è´¦æˆ·æˆ–ç»„ç»‡>/<ä½ çš„ä»“åº“åç§°>/actions`

è®¾ç½®å¥½åï¼Œ**æ¯å½“æœ‰äººå‘ä½ çš„ä»“åº“æ¨é€ä»£ç æˆ–æ‰“å¼€æ‹‰å–è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šè¿è¡Œå®‰å…¨æ£€æŸ¥**ï¼Œç¡®ä¿ä¸ä¼šå¾€åŒ…é‡Œå¼•å…¥ä»»ä½•æ¼æ´ã€‚å¦‚æœå‘ç°é—®é¢˜ï¼Œæ“ä½œä¼šå¤±è´¥ï¼Œè¿˜ä¼šå‘ä½ å‘å‡ºæ‰¾åˆ°çš„å®‰å…¨é—®é¢˜çš„è¯¦ç»†ä¿¡æ¯è­¦æŠ¥ã€‚æ¥ä¸‹æ¥ï¼Œä½ è¦è‡ªåŠ¨åŒ– npm åŒ…çš„ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒè¿‡ç¨‹ã€‚

ä½ æ˜¯ä¸æ˜¯æƒ³åœ¨æ›´æ”¹æ¨é€åˆ°ä»“åº“ä¹‹å‰å°±äº†è§£å®‰å…¨é—®é¢˜ï¼Ÿ[ä¸ºä½ é€‰æ‹©çš„å¼€å‘å·¥å…·å®‰è£… Snyk æ’ä»¶](https://snyk.io/platform/ide-plugins/)ã€‚ä½ æ›´å–œæ¬¢ç”¨å‘½ä»¤è¡Œå·¥å…·å—ï¼Ÿ[ä¹ŸæŠŠ Snyk å‘½ä»¤è¡Œå·¥å…·æ·»åŠ åˆ°ä½ çš„å·¥å…·é“¾ä¸­](https://snyk.io/platform/snyk-cli/)ã€‚è¿™äº›å·¥å…·èƒ½å¸®åŠ©ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ£€æµ‹å®‰å…¨é—®é¢˜ï¼Œåœ¨é¡¹ç›®å·¥ä½œæµç¨‹çš„æ—©æœŸå‘ä½ å‘å‡ºè­¦æŠ¥ã€‚

å…³äºå½“å‰è®¾ç½®è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒåªç”¨äº† [Snyk å¼€æº](https://snyk.io/product/open-source-security-management/)ï¼ˆSCAï¼‰äº§å“ï¼Œæ²¡ä½¿ç”¨ [Snyk ä»£ç ](https://snyk.io/product/snyk-code/)ï¼ˆSASTï¼‰ã€‚Snyk ä»£ç æ˜¯æˆ‘ä»¬çš„ä»£ç å®‰å…¨äº§å“ï¼Œä½ å¾—å…ˆé€šè¿‡ Snyk è´¦æˆ·å…è´¹å¯ç”¨å®ƒï¼Œç„¶åæŠŠå®ƒæ·»åŠ åˆ°è¿™é‡Œçš„å·¥ä½œæµè„šæœ¬ä¸­ï¼Œæ‰èƒ½å……åˆ†åˆ©ç”¨å®ƒã€‚è¦äº†è§£æ›´å¤šå…³äºåœ¨ç®¡é“é‡Œä½¿ç”¨ Snyk ä»£ç çš„ä¿¡æ¯ï¼Œè¯·é˜…è¯»è¿™ç¯‡å…³äº [ä½¿ç”¨ GitHub Actions æ„å»ºå®‰å…¨ç®¡é“](https://snyk.io/blog/building-a-secure-pipeline-with-github-actions/) çš„æ–‡ç« ï¼ˆè¿™ç¯‡æ–‡ç« ç”¨ Java å’Œ Mavenï¼Œä½†å¯ä»¥æ¢æˆ Node.js å’Œ npmï¼‰ã€‚

## è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒ

æ¯å½“ä½ æŠŠæ›´æ”¹åˆå¹¶åˆ°ä¸»åˆ†æ”¯æ—¶ï¼Œä½ å¯èƒ½ä¸æƒ³æ¯æ¬¡éƒ½æ‰‹åŠ¨æ›´æ–° npm åŒ…çš„ç‰ˆæœ¬å¹¶å‘å¸ƒå®ƒã€‚ç›¸åï¼Œä½ ä¼šå¸Œæœ›æŠŠè¿™ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚è¦æ˜¯ä½ è¿˜è®°å¾—æœ¬æ–‡å‰é¢ç®€å• npm åŒ…çš„ç¤ºä¾‹ï¼Œä½ ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å‘å¸ƒ npm åŒ…ï¼š

ä½ è¿˜å¸Œæœ›éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„è¡Œä¸šæ ‡å‡†ï¼Œè¿™æ ·ä½ çš„åŒ…çš„ä½¿ç”¨è€…å°±èƒ½ç†è§£ä½ å‘å¸ƒåˆ°æ³¨å†Œè¡¨çš„ä¸åŒç‰ˆæœ¬å˜æ›´ä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ã€‚

### ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ

è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„å®šç‰ˆæœ¬å·ç”±ä¸‰ä¸ªå ä½ç¬¦ç»„æˆã€‚ç¬¬ä¸€ä¸ªæ˜¯ä¸»ç‰ˆæœ¬å·ï¼Œç¬¬äºŒä¸ªæ˜¯æ¬¡ç‰ˆæœ¬å·ï¼Œæœ€åä¸€ä¸ªæ˜¯è¡¥ä¸ç‰ˆæœ¬å·ã€‚è¦äº†è§£æ›´å¤šå…³äºè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ã€ç‰ˆæœ¬ç®¡ç†å’Œé”æ–‡ä»¶çš„ä¿¡æ¯ï¼Œè¯·é˜…è¯»[ä»€ä¹ˆæ˜¯ Package Lock JSON ä»¥åŠé”æ–‡ä»¶å¦‚ä½•ä¸ Yarn å’Œ NPM åŒ…ä¸€èµ·å·¥ä½œ](https://snyk.io/blog/what-is-package-lock-json/)ã€‚

è¦æ˜¯ä½ èƒ½è·³è¿‡æ‰€æœ‰æ‰‹åŠ¨æ“ä½œï¼Œç”¨ GitHub Actions è®¾ç½®ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œè®©å®ƒå¸®ä½ å¤„ç† npm åŒ…çš„å‘å¸ƒï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿä½ å¾ˆå¹¸è¿ï¼Œå› ä¸ºæœ‰ä¸ªå« [Semantic Release](https://semantic-release.gitbook.io/semantic-release/) çš„å·¥å…·ï¼Œå®ƒèƒ½å’Œ [GitHub Actions](https://semantic-release.gitbook.io/semantic-release/recipes/ci-configurations/github-actions) é›†æˆã€‚å¸®åŠ©è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹çš„å…³é”®æ˜¯ï¼Œåœ¨å‘é¡¹ç›®æäº¤æ›´æ”¹æ—¶ä½¿ç”¨æ‰€è°“çš„ [å¸¸è§„æäº¤](https://www.conventionalcommits.org/en/v1.0.0/)ã€‚è¿™èƒ½è®©è‡ªåŠ¨åŒ–ç›¸åº”åœ°æ›´æ–°æ‰€æœ‰å†…å®¹ï¼ŒçŸ¥é“æ€ä¹ˆä¸ºä½ å‡†å¤‡é¡¹ç›®çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒã€‚

ä¸‹é¢çš„æ­¥éª¤ä¼šæŒ‡å¯¼ä½ ä¸ºç°ä»£ npm åŒ…è®¾ç½®è¿™ä¸ªåŠŸèƒ½ã€‚

1\. åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š`npm i -D semantic-release`
2\. åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š`npx semantic-release-cli setup`
3\. æŒ‰ç»ˆç«¯æç¤ºï¼Œæä¾›æ‰€éœ€çš„ä»¤ç‰Œï¼š

- ä½ éœ€è¦ä¸€ä¸ªæ¥è‡ª GitHub çš„ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚è¦åˆ›å»ºä¸€ä¸ªä»¤ç‰Œï¼Œè¯·è®¿é—® `https://github.com/settings/tokens/new?scopes=public_repo`
- åˆ›å»ºæ­¤ä»¤ç‰Œæ—¶ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æƒé™èŒƒå›´ï¼š
  ![ ](https://res.cloudinary.com/snyk/image/upload/f_auto,w_2560,q_auto/v1663712555/wordpress-sync/blog-create-npm-packages-new-token.png)
- ç‚¹å‡» â€œç”Ÿæˆä»¤ç‰Œâ€ æŒ‰é’®ï¼Œå¤åˆ¶å¹¶ä¿å­˜é¡µé¢ä¸Šæ˜¾ç¤ºçš„å€¼ã€‚
- ä½ è¿˜éœ€è¦ä¸€ä¸ªæ¥è‡ª npm çš„ **è‡ªåŠ¨åŒ–ç±»å‹** è®¿é—®ä»¤ç‰Œï¼Œä»…ç”¨äº CI ç¯å¢ƒï¼Œè¿™æ ·å®ƒå°±èƒ½ç»•è¿‡ä½ è´¦æˆ·çš„åŒå› ç´ èº«ä»½éªŒè¯ï¼ˆ2FAï¼‰ã€‚è¦åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„ä»¤ç‰Œï¼Œè¯·è®¿é—® `https://www.npmjs.com/settings/<your-npm-account>/tokens`ã€‚è¯·ç¡®ä¿é€‰æ‹© â€œAutomationâ€ ç±»å‹ï¼Œå› ä¸ºè¿™å°†åœ¨ CI/CD å·¥ä½œæµä¸­ä½¿ç”¨ã€‚
  ![ ](https://res.cloudinary.com/snyk/image/upload/f_auto,w_2560,q_auto/v1663712548/wordpress-sync/blog-create-npm-packages-token.png)

```bash
bc@mbp-snyk modern-npm-package % npx semantic-release-cli setup
? What is your npm registry? https://registry.npmjs.org/
? What is vour nom username? clarkio
? What is your pm password? [hidden]
? What is your NPM two-factor authentication code? <2FA code>
Provide a GitHub Personal Access Token (create a token at https://github.com/settings/tokens/new?scopes=repo <token>
? What CI are you using? Github Actions
bc@mbp-snyk modern-npm-package %
```

4\. åœ¨è¿™é‡ŒæŠŠä½ çš„ npm ä»¤ç‰Œä½œä¸ºä»“åº“å¯†é’¥æ·»åŠ åˆ° GitHub ä»“åº“ä¸­ï¼š`https://github.com/<ä½ çš„åç§°æˆ–ç»„ç»‡>/<ä½ çš„ä»“åº“>/settings/secrets/actions/new`ã€‚æŠŠå¯†é’¥åç§°è®¾ç½®ä¸º `NPM_TOKEN`ï¼Œå€¼ä¸ºä½ åœ¨å‰é¢æ­¥éª¤ä¸­è·å–çš„ä»¤ç‰Œã€‚
   ![ ](https://res.cloudinary.com/snyk/image/upload/f_auto,w_2560,q_auto/v1663712560/wordpress-sync/blog-create-npm-packages-secret.png)
5\. å›åˆ°ä½ çš„é¡¹ç›®ï¼Œæ‰“å¼€ `package.json` æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹æ‰€ç¤ºçš„ `releases` é”®ã€‚å¦‚æœä½ çš„ä»“åº“ä¸»åˆ†æ”¯ä»ç„¶åä¸º `master` è€Œä¸æ˜¯ `main`ï¼Œå°±ç›¸åº”åœ°æ›´æ–°ä¸Šè¿° `branches` çš„å€¼ã€‚

```javascript
"release": {
  "branches": ["main"]
}
```

6\. åŒæ—¶åœ¨ `package.json` æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª `publishConfig` é”®ï¼š

```javascript
"publishConfig": {
  "access": "public"
}
```

7\. ç”¨ `semantic-release` npm è„šæœ¬è¿›è¡Œè¯•è¿è¡Œï¼Œæµ‹è¯•æ‰€æœ‰å†…å®¹ã€‚è·å–ä¸‹é¢çš„å‘½ä»¤ï¼ŒæŠŠ `NPM_TOKEN=` å’Œ `GH_TOKEN=` çš„å€¼è®¾ç½®ä¸ºä½ å„è‡ªçš„ä»¤ç‰Œå€¼ã€‚ç„¶åå¤åˆ¶å®Œæ•´å‘½ä»¤ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼Œçœ‹çœ‹ä¸€åˆ‡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚ä½ ä¼šåœ¨ç»ˆç«¯è¾“å‡ºä¸­çœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹çš„æ—¥å¿—ã€‚å¦‚æœå‡ºç°ä»»ä½•é—®é¢˜ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºç›¸å…³ä¿¡æ¯ï¼Œè¿˜ä¼šæä¾›è§£å†³é—®é¢˜çš„è¯¦ç»†è¯´æ˜ã€‚
8\. ç¡®è®¤è¯•è¿è¡ŒæˆåŠŸå®Œæˆåï¼Œä½ å¯ä»¥ä¸º GitHub ä»“åº“è®¾ç½®ä¸€ä¸ªæ–°çš„ GitHub Actionï¼Œè®©å®ƒå¸®ä½ å¤„ç†å‘å¸ƒè¿‡ç¨‹ã€‚å‰å¾€ GitHub ä¸Šçš„ä»“åº“ï¼Œç‚¹å‡» â€œActionsâ€ã€‚
9\. ç‚¹å‡» **æ–°å»ºå·¥ä½œæµ** é€‰é¡¹ã€‚
10\. æŠŠå·¥ä½œæµé‡å‘½åä¸º `release.yml`ã€‚
11\. æŠŠä¸‹é¢çš„ YAML è„šæœ¬æ·»åŠ åˆ°æ–°çš„å·¥ä½œæµæ–‡ä»¶ä¸­ã€‚è¿™ä¸ªè„šæœ¬æœ¬è´¨ä¸Šæ˜¯è¯´ï¼Œä¸€æ—¦ Snyk å®‰å…¨æ£€æŸ¥å·¥ä½œæˆåŠŸå®Œæˆï¼Œå°±è¿è¡Œå‘å¸ƒä½œä¸šã€‚å‘å¸ƒä½œä¸šä¼šæ£€å‡ºä»£ç ï¼Œè®¾ç½® Node.js ç¯å¢ƒï¼Œå®‰è£…ä¾èµ–é¡¹ï¼Œç„¶åç”¨ä½ çš„ GitHub å’Œ npm ä»¤ç‰Œè¿è¡Œè¯­ä¹‰åŒ–å‘å¸ƒã€‚

```javascript
name: Release
on:
 workflow_run:
 workflows: ['Snyk Security Check', 'Tests']
 branches: [main]
 types:
 - completed

permissions:
 contents: read

jobs:
 release:
 name: Release
 runs-on: ubuntu-latest
 permissions:
 contents: write # to be able to publish a GitHub release
 issues: write # to be able to comment on released issues
 pull-requests: write # to be able to comment on released pull requests
 id-token: write
 steps:
 - name: Checkout
 uses: actions/checkout@v4
 with:
 fetch-depth: 0
 - name: Setup Node.js
 uses: actions/setup-node@v4
 with:
 node-version: 'lts/*'
 - name: Install dependencies
 run: npm ci
 - name: Verify the integrity of provenance attestations and registry signatures for installed dependencies
 run: npm audit signatures
 - name: Release
 env:
 GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
 NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
 run: npx semantic-release
```

è¿™ä¸ªè„šæœ¬æœ¬è´¨ä¸Šè¡¨æ˜ï¼Œä¸€æ—¦ Snyk å®‰å…¨æ£€æŸ¥å’Œæµ‹è¯•å·¥ä½œæˆåŠŸå®Œæˆï¼Œå°±è¿è¡Œå‘å¸ƒä½œä¸šã€‚å‘å¸ƒä½œä¸šä¼šæ£€å‡ºä»£ç ï¼Œè®¾ç½® Node.js ç¯å¢ƒï¼Œå®‰è£…ä¾èµ–é¡¹ï¼Œç„¶åç”¨ä½ çš„ GitHub å’Œ npm ä»¤ç‰Œè¿è¡Œè¯­ä¹‰åŒ–å‘å¸ƒã€‚

- æ³¨æ„ï¼šGitHub Actions å†…ç½®äº† GITHUB_TOKEN å¯†é’¥/ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªç¯å¢ƒä¸­ä¸ç”¨æä¾›ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ä¸ªäººè®¿é—®ä»¤ç‰Œä»…ç”¨äºå¯¹è¯­ä¹‰åŒ–å‘å¸ƒé…ç½®è¿›è¡Œæœ¬åœ°æµ‹è¯•ã€‚

12\. æäº¤æœ¬åœ°æ›´æ”¹ï¼ŒæŠŠå®ƒä»¬æ¨é€åˆ°ä½ çš„ GitHub ä»“åº“ã€‚

- ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œå‘½ä»¤ `git commit -am '<ä½ çš„æäº¤æ¶ˆæ¯>'`ï¼Œç„¶åè¿è¡Œ `git push` æ¥å®Œæˆæ­¤æ“ä½œã€‚
- ä½ ä¹Ÿå¯ä»¥é€šè¿‡ VS Code çš„[ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½](https://code.visualstudio.com/docs/editor/versioncontrol)æ¥å®Œæˆã€‚

13\. è®¾ç½®å¥½æ‰€æœ‰è¿™äº›ä¹‹åï¼Œä½ ç°åœ¨å¯ä»¥ç”¨[è§„èŒƒæäº¤](https://www.conventionalcommits.org/en/v1.0.0/)æŠŠæ›´æ”¹æ¨é€åˆ°ä¸»åˆ†æ”¯ï¼ˆæˆ–è€…é€šè¿‡åˆå¹¶æ‹‰å–è¯·æ±‚ï¼‰ï¼Œå‘å¸ƒå·¥ä½œæµå°±ä¼šè¿è¡Œï¼ˆå½“ç„¶æ˜¯åœ¨ Snyk å®‰å…¨æ£€æŸ¥ä¹‹åï¼‰ã€‚ä½ å¯ä»¥åœ¨ç¤ºä¾‹[ç°ä»£ npm åŒ…ä»“åº“å·¥ä½œæµ](https://github.com/snyk-snippets/modern-npm-package/actions/runs/13039904020)ä¸­æŸ¥çœ‹è¿™ä¸€è¿‡ç¨‹çš„å®ä¾‹ã€‚

## é€šè¿‡ GitHub ä½¿ç”¨ Snyk è¿›è¡ŒæŒç»­å®‰å…¨ç›‘æ§

è™½ç„¶åœ¨æäº¤ä»£ç çš„è¿‡ç¨‹ä¸­ç›´æ¥è¿›è¡Œå®‰å…¨æ£€æŸ¥å¾ˆæœ‰ç”¨ï¼Œä½†è¿˜æ˜¯æœ‰å¯èƒ½é”™è¿‡ä¸¤æ¬¡æäº¤ä¹‹é—´å‡ºç°çš„æ¼æ´ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ å‡ ä¸ªæœˆéƒ½æ²¡å¾€ä»“åº“æ¨é€ä»»ä½•ä»£ç ï¼Œé‚£åœ¨è¿™æ®µæ—¶é—´å†…å‘ç°çš„ä»»ä½•æ–°æ¼æ´ä½ éƒ½ä¸ä¼šçŸ¥é“ã€‚è¿™æ—¶ï¼ŒSnyk å°±èƒ½å‘æŒ¥æ›´å¤§çš„ä½œç”¨ï¼å½“ä½ æŠŠ GitHub ä»“åº“è¿æ¥åˆ° Snyk æ—¶ï¼Œä¸ç®¡ä½ å¤šä¹…åœ¨é¡¹ç›®ä¸Šå†™ä¸€æ¬¡ä»£ç ï¼Œå®ƒéƒ½ä¼šè‡ªåŠ¨ç›‘æ§æ–°çš„æ¼æ´å¹¶å‘ä½ å‘å‡ºè­¦æŠ¥ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜ä¼šè‡ªåŠ¨åˆ›å»ºæ‹‰å–è¯·æ±‚æ¥å¸®ä½ è§£å†³å®‰å…¨é—®é¢˜ã€‚

Snyk æœ‰ä¸¤æ¬¾äº§å“å¯¹ç¡®ä¿ npm åŒ…ä»£ç åŠå…¶ä¾èµ–é¡¹çš„å®‰å…¨æ€§ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚[Snyk Code](https://snyk.io/product/snyk-code/) æœ‰åŠ©äºä¿éšœä½ çš„åŒ…ä»£ç å®‰å…¨ï¼Œ[Snyk Open Source](https://snyk.io/product/open-source-security-management/) åˆ™ä¼šç›‘æ§ä½ çš„å¼€æºä¾èµ–é¡¹æ˜¯å¦å­˜åœ¨æ¼æ´ã€‚

è¦å……åˆ†åˆ©ç”¨ä½ çš„å…è´¹ Snyk è´¦æˆ·ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. [ç™»å½•ä½ çš„å…è´¹ Snyk è´¦æˆ·](https://app.snyk.io/login)
2. é€‰æ‹© **æ·»åŠ é¡¹ç›®**ï¼Œç„¶åé€‰æ‹© **GitHub**ã€‚
   ![ ](https://res.cloudinary.com/snyk/image/upload/f_auto,w_2560,q_auto/v1663712563/wordpress-sync/blog-create-npm-packages-gh.png)
3. æŒ‰åç§°æœç´¢ä½ çš„é¡¹ç›®ä»“åº“ï¼Œé€‰ä¸­å…¶æ—è¾¹çš„å¤é€‰æ¡†ã€‚
   ![ ](https://res.cloudinary.com/snyk/image/upload/f_auto,w_2560,q_auto/v1663712557/wordpress-sync/blog-create-npm-packages-snyk.png)
4. ç¡®è®¤ä»“åº“å·²æˆåŠŸå¯¼å…¥ Snykã€‚
   ![ ](https://res.cloudinary.com/snyk/image/upload/f_auto,w_2560,q_auto/v1663712563/wordpress-sync/blog-create-npm-packages-project.png)

## å¼€å§‹åˆ›å»ºç°ä»£ npm åŒ…

å’±ä»¬æ€»ç»“ä¸€ä¸‹ä½ åœ¨è¿™ç¯‡æ–‡ç« é‡Œå­¦åˆ°çš„æ‰€æœ‰å†…å®¹ã€‚é¦–å…ˆï¼Œä½ äº†è§£äº†æ€ä¹ˆè®¾ç½®ã€åˆ›å»ºå’Œéƒ¨ç½²ä¸€ä¸ªç®€å•çš„ npm åŒ…ã€‚è¿™å¯¹é¦–æ¬¡ç†Ÿæ‚‰æ€ä¹ˆå‘å¸ƒè‡ªå·±çš„ npm åŒ…å¾ˆæœ‰å¸®åŠ©ã€‚ä¸è¿‡ï¼Œè¦æ˜¯ä½ æƒ³åˆ›å»ºä¸€ä¸ªèƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ npm åŒ…ï¼Œè¿™æ ·åšä¼šå¾ˆéº»çƒ¦ï¼Œä¹Ÿä¸å¥½æŒç»­ã€‚

ä¸ºäº†åˆ›å»ºä¸€ä¸ªèƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒçš„åŒ…ï¼Œä½ éšåå­¦ä¹ äº†æ€ä¹ˆä¸º CommonJS (CJS) å’Œ ECMAScript (ESM) æ¨¡å—æ ¼å¼è¿›è¡Œæ„å»ºï¼Œæ€ä¹ˆè®¾ç½®å¹¶ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæ€ä¹ˆå®æ–½å®‰å…¨æ£€æŸ¥ï¼Œä»¥åŠæ€ä¹ˆè‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒã€‚æœ‰äº†è¿™äº›çŸ¥è¯†ï¼Œä½ ç°åœ¨å·²ç»å‡†å¤‡å¥½åˆ›å»ºæ›´å¤šè®©ç¤¾åŒºæˆ–å…¬å¸å®¹æ˜“ä½¿ç”¨çš„ npm åŒ…äº†ã€‚

è¯•è¯• Snyk å…è´¹çš„ [JavaScript ä»£ç æ£€æŸ¥å™¨](https://snyk.io/code-checker/javascript/)ï¼ŒæŸ¥æ‰¾å¹¶ä¿®å¤ä»£ç ä¸­çš„æ¼æ´ã€‚

[è‹±æ–‡åŸæ–‡](https://snyk.io/blog/best-practices-create-modern-npm-package/)
